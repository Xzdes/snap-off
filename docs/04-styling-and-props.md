# Документация `snap-off`: 4. Стилизация и Styling Props

`snap-off` предоставляет мощную и интуитивно понятную систему стилизации, которая решает две главные проблемы CSS: глобальную область видимости и сложность динамического изменения стилей.

## 4.1. Автоматическая изоляция стилей (Скоупинг)

Классический CSS страдает от того, что все стили глобальны. Стиль, определенный для `.button` в одном компоненте, может случайно "протечь" и повлиять на другой компонент.

`snap-off` решает эту проблему автоматически.

**Как это работает:**

1.  Вы пишете обычный, чистый CSS в файле `style.css` вашего компонента.

    **`src/components/my-button/style.css`**
    ```css
    .button-primary {
      background-color: blue;
      color: white;
    }

    .button-primary:hover {
      background-color: darkblue;
    }
    ```

2.  При рендеринге компонента `snap-off` генерирует для него уникальный ID, например, `qYumZ6Ri`.
3.  Движок стилей (`style-engine`) парсит ваш `style.css` и добавляет к каждому селектору атрибут с этим ID.

    **CSS, который будет вставлен на страницу:**
    ```html
    <style>
    .button-primary[snap-c-id="qYumZ6Ri"] {
      background-color: blue;
      color: white;
    }

    .button-primary[snap-c-id="qYumZ6Ri"]:hover {
      background-color: darkblue;
    }
    </style>
    ```

4.  Сам компонент также получает этот атрибут:
    ```html
    <button class="button-primary" snap-c-id="qYumZ6Ri">Нажми меня</button>
    ```

**Результат:** Ваши стили становятся на 100% "герметичными". Они применяются только к этому конкретному экземпляру компонента и никогда не повлияют на другие элементы на странице. Вам больше не нужно придумывать длинные, уникальные имена классов (методология БЭМ и т.п.).

## 4.2. Styling Props: Стилизация через атрибуты

Часто возникает необходимость кастомизировать внешний вид компонента при его использовании. Например, сделать одну кнопку красной, а другую — зеленой. Вместо того чтобы создавать десятки классов-модификаторов, `snap-off` предлагает элегантный способ — **Styling Props**.

Styling Props — это специальные HTML-атрибуты, которые напрямую транслируются в CSS-свойства.

### Базовые стили

Любой атрибут, который не является стандартным для HTML, но является валидным CSS-свойством, будет применен как инлайн-стиль. Имена свойств можно писать в формате `kebab-case` или `camelCase`.

**Пример использования:**
```javascript
// server.js
// Передаем styling props при рендере
const html = await snap.render('my-button', { 
  'background-color': 'green',
  'border-radius': '8px',
  'padding': '10px 20px' // Важно: используйте одинарные кавычки для свойств с дефисом
}, req);
```

**Что происходит:**
-   `style-engine` распознает эти атрибуты как CSS-свойства.
-   Он формирует из них строку для атрибута `style`.
-   В шаблоне `view.html` вы вставляете ее с помощью `{{{styleAttr}}}`.

**`view.html`:**
```html
<button {{{styleAttr}}}>Моя кнопка</button>
```

**Итоговый HTML:**
```html
<button style="background-color:green; border-radius:8px; padding:10px 20px;">Моя кнопка</button>
```

### Динамические стили (Псевдо-классы)

Самая мощная часть Styling Props — возможность определять стили для псевдо-классов, таких как `:hover` и `:focus`, прямо в атрибутах.

Для этого используется синтаксис `псевдокласс:свойство`.

**Пример использования:**
```javascript
// server.js
const html = await snap.render('my-button', { 
  'background-color': 'purple',
  'hover:background-color': 'darkviolet', // Стиль для :hover
  'focus:outline': '2px solid yellow'    // Стиль для :focus
}, req);
```

**Что происходит:**
-   `background-color` применяется как инлайн-стиль.
-   `hover:background-color` и `focus:outline` распознаются как динамические правила.
-   `style-engine` генерирует для них CSS-правила с уникальным `scopeId` и помещает их в тег `<style>`, который вставляется в шаблон через `{{{styleTag}}}`.

**Итоговый HTML будет содержать:**
```html
<!-- Инлайн-стиль -->
<button style="background-color:purple;" snap-c-id="abc123">...</button>

<!-- Динамические стили в отдельном теге -->
<style>
[snap-c-id="abc123"]:hover {
  background-color: darkviolet;
}
[snap-c-id="abc123"]:focus {
  outline: 2px solid yellow;
}
</style>
```

## 4.3. Приоритеты и каскад

Система стилизации `snap-off` имеет четкий порядок применения стилей, эмулирующий каскад CSS:

1.  **Базовые стили (`style.css`):** Самый низкий приоритет. Они определяют внешний вид компонента по умолчанию.
2.  **Инлайн-стили из Styling Props:** Более высокий приоритет. Они переопределяют базовые стили. (например, `background-color` из пропсов "победит" `background-color` из `style.css`).
3.  **Динамические стили из Styling Props (`:hover`, `:focus`):** Применяются при соответствующем состоянии и переопределяют как базовые, так и инлайн-стили.

Эта система дает вам полный контроль над внешним видом компонентов: вы можете задать надежную базу в `style.css` и гибко кастомизировать каждый экземпляр через `props` там, где это необходимо.

---
**Следующий документ:** [5. Dev Lab: Мастерская разработчика](./05-dev-lab.md)